---
apiVersion: dashboard.grafana.app/v2beta1
kind: Dashboard
spec:
  annotations:
    - kind: AnnotationQuery
      spec:
        builtIn: true
        enable: true
        hide: true
        iconColor: rgba(0, 211, 255, 1)
        name: Annotations & Alerts
        query:
          datasource:
            name: '-- Grafana --'
          group: grafana
          kind: DataQuery
          spec: {}
          version: v0
  cursorSync: 'Off'
  editable: true
  elements:
    panel-1:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    group: ''
                    kind: DataQuery
                    spec: {}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: ''
        id: 1
        links: []
        title: ''
        vizConfig:
          group: text
          kind: VizConfig
          spec:
            fieldConfig:
              defaults: {}
              overrides: []
            options:
              code:
                language: plaintext
                showLineNumbers: false
                showMiniMap: false
              content: >-
                <img src="https://www.lhowon.org/levels/marathon-2/standard/15.png" />
              mode: html
          version: 12.4.0-21428475782
    panel-2:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    group: ''
                    kind: DataQuery
                    spec: {}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: ''
        id: 2
        links: []
        title: ''
        vizConfig:
          group: text
          kind: VizConfig
          spec:
            fieldConfig:
              defaults: {}
              overrides: []
            options:
              code:
                language: plaintext
                showLineNumbers: false
                showMiniMap: false
              content: "# 16"
              mode: markdown
          version: 12.4.0-21428475782
    panel-3:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    group: ''
                    kind: DataQuery
                    spec: {}
                    version: v0
                  refId: A
            queryOptions: {}
            transformations: []
        description: ''
        id: 3
        links: []
        title: ''
        vizConfig:
          group: text
          kind: VizConfig
          spec:
            fieldConfig:
              defaults: {}
              overrides: []
            options:
              code:
                language: plaintext
                showLineNumbers: false
                showMiniMap: false
              content: "# For Carnage, Apply Within"
              mode: markdown
          version: 12.4.0-21428475782
    panel-5:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ffbxubp3owa9sc
                    group: grafana-mongodb-datasource
                    kind: DataQuery
                    spec:
                      expand: true
                      parsedQuery: >-
                        marathon-game-data.marathon-game-data.aggregate([{"$match":{"scenario
                        name":"Marathon 2","level":"For Carnage, Apply Within"}},{"$facet":{"stats":[{"$group":{"_id":null,"fired":{"$sum":{"$toInt":{"$ifNull":["$pistol
                        bullets
                        fired",0]}}},"hit":{"$sum":{"$toInt":{"$ifNull":["$pistol
                        bullets
                        hit",0]}}}}}]}},{"$project":{"_id":0,"statsDoc":{"$arrayElemAt":["$stats",0]}}},{"$project":{"_id":0,"fired":{"$ifNull":["$statsDoc.fired",0]},"hit":{"$ifNull":["$statsDoc.hit",0]}}}])
                      query: |-
                        marathon-game-data.marathon-game-data.aggregate([
                          {
                            $match: {
                              "scenario name": "$game",
                              "level": "$level"
                            }
                          },
                          {
                            $facet: {
                              stats: [
                                {
                                  $group: {
                                    _id: null,
                                    fired: {
                                      $sum: {
                                        $toInt: {
                                          $ifNull: [
                                            "$pistol bullets fired",
                                            0
                                          ]
                                        }
                                      }
                                    },
                                    hit: {
                                      $sum: {
                                        $toInt: {
                                          $ifNull: [
                                            "$pistol bullets hit",
                                            0
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          },
                          {
                            $project: {
                              _id: 0,
                              statsDoc: { $arrayElemAt: ["$stats", 0] }
                            }
                          },
                          {
                            $project: {
                              _id: 0,
                              fired: { $ifNull: ["$statsDoc.fired", 0] },
                              hit: { $ifNull: ["$statsDoc.hit", 0] }
                            }
                          }
                        ])
                      queryType: query
                    version: v0
                  refId: A
            queryOptions: {}
            transformations:
              - kind: calculateField
                spec:
                  id: calculateField
                  options:
                    alias: RawAccuracy
                    binary:
                      left:
                        matcher:
                          id: byName
                          options: hit
                      operator: /
                      right:
                        matcher:
                          id: byName
                          options: fired
                    mode: binary
                    reduce:
                      reducer: sum
              - kind: calculateField
                spec:
                  id: calculateField
                  options:
                    alias: Accuracy
                    binary:
                      left:
                        fixed: ''
                      right:
                        fixed: ''
                    cumulative:
                      field: Accuracy
                      reducer: sum
                    mode: reduceRow
                    reduce:
                      include:
                        - RawAccuracy
                      reducer: sum
                    replaceFields: false
                    unary:
                      fieldName: Accuracy
                      operator: abs
              - kind: organize
                spec:
                  id: organize
                  options:
                    excludeByName:
                      RawAccuracy: true
                    includeByName: {}
                    indexByName: {}
                    renameByName:
                      fired: Fired
                      hit: Hit
                      pistolBulletsFired: Fired
                      pistolBulletsHit: Hit
                      rifleBulletsFired: Fired
                      rifleBulletsHit: Hit
        description: ''
        id: 5
        links: []
        title: ''
        vizConfig:
          group: stat
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                color:
                  mode: thresholds
                fieldMinMax: false
                thresholds:
                  mode: absolute
                  steps:
                    - color: green
                      value: 0
                    - color: red
                      value: 80
              overrides:
                - matcher:
                    id: byName
                    options: Accuracy
                  properties:
                    - id: unit
                      value: percentunit
            options:
              colorMode: value
              graphMode: area
              justifyMode: center
              orientation: auto
              percentChangeColorMode: standard
              reduceOptions:
                calcs:
                  - lastNotNull
                fields: ''
                values: false
              showPercentChange: false
              textMode: value_and_name
              wideLayout: false
          version: 12.4.0-21428475782
    panel-6:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries:
              - kind: PanelQuery
                spec:
                  hidden: false
                  query:
                    datasource:
                      name: ffbxubp3owa9sc
                    group: grafana-mongodb-datasource
                    kind: DataQuery
                    spec:
                      expand: true
                      parsedQuery: >-
                        marathon-game-data.marathon-game-data.aggregate([{"$match":{"scenario
                        name":"Marathon 2","level":"For Carnage, Apply Within"}},{"$facet":{"stats":[{"$group":{"_id":null,"fired":{"$sum":{"$toInt":{"$ifNull":["$rifle
                        bullets
                        fired",0]}}},"hit":{"$sum":{"$toInt":{"$ifNull":["$rifle
                        bullets
                        hit",0]}}}}}]}},{"$project":{"_id":0,"statsDoc":{"$arrayElemAt":["$stats",0]}}},{"$project":{"_id":0,"fired":{"$ifNull":["$statsDoc.fired",0]},"hit":{"$ifNull":["$statsDoc.hit",0]}}}])
                      query: |-
                        marathon-game-data.marathon-game-data.aggregate([
                          {
                            $match: {
                              "scenario name": "$game",
                              "level": "$level"
                            }
                          },
                          {
                            $facet: {
                              stats: [
                                {
                                  $group: {
                                    _id: null,
                                    fired: {
                                      $sum: {
                                        $toInt: {
                                          $ifNull: [
                                            "$rifle bullets fired",
                                            0
                                          ]
                                        }
                                      }
                                    },
                                    hit: {
                                      $sum: {
                                        $toInt: {
                                          $ifNull: [
                                            "$rifle bullets hit",
                                            0
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          },
                          {
                            $project: {
                              _id: 0,
                              statsDoc: { $arrayElemAt: ["$stats", 0] }
                            }
                          },
                          {
                            $project: {
                              _id: 0,
                              fired: { $ifNull: ["$statsDoc.fired", 0] },
                              hit: { $ifNull: ["$statsDoc.hit", 0] }
                            }
                          }
                        ])
                      queryType: query
                    version: v0
                  refId: A
            queryOptions: {}
            transformations:
              - kind: calculateField
                spec:
                  id: calculateField
                  options:
                    alias: RawAccuracy
                    binary:
                      left:
                        matcher:
                          id: byName
                          options: hit
                      operator: /
                      right:
                        matcher:
                          id: byName
                          options: fired
                    mode: binary
                    reduce:
                      reducer: sum
              - kind: calculateField
                spec:
                  id: calculateField
                  options:
                    alias: Accuracy
                    binary:
                      left:
                        fixed: ''
                      right:
                        fixed: ''
                    cumulative:
                      field: Accuracy
                      reducer: sum
                    mode: reduceRow
                    reduce:
                      include:
                        - RawAccuracy
                      reducer: sum
                    replaceFields: false
                    unary:
                      fieldName: Accuracy
                      operator: abs
              - kind: organize
                spec:
                  id: organize
                  options:
                    excludeByName:
                      RawAccuracy: true
                    includeByName: {}
                    indexByName: {}
                    renameByName:
                      fired: Fired
                      hit: Hit
                      pistolBulletsFired: Fired
                      pistolBulletsHit: Hit
                      rifleBulletsFired: Fired
                      rifleBulletsHit: Hit
        description: ''
        id: 6
        links: []
        title: ''
        vizConfig:
          group: stat
          kind: VizConfig
          spec:
            fieldConfig:
              defaults:
                color:
                  mode: thresholds
                fieldMinMax: false
                thresholds:
                  mode: absolute
                  steps:
                    - color: green
                      value: 0
                    - color: red
                      value: 80
              overrides:
                - matcher:
                    id: byName
                    options: Accuracy
                  properties:
                    - id: unit
                      value: percentunit
            options:
              colorMode: value
              graphMode: area
              justifyMode: center
              orientation: auto
              percentChangeColorMode: standard
              reduceOptions:
                calcs:
                  - lastNotNull
                fields: ''
                values: false
              showPercentChange: false
              textMode: value_and_name
              wideLayout: false
          version: 12.4.0-21428475782
    panel-7:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries: []
            queryOptions: {}
            transformations: []
        description: ''
        id: 7
        links: []
        title: Pistol
        vizConfig:
          group: text
          kind: VizConfig
          spec:
            fieldConfig:
              defaults: {}
              overrides: []
            options:
              code:
                language: plaintext
                showLineNumbers: false
                showMiniMap: false
              content: >-
                <img
                src="https://static.wikia.nocookie.net/marathongame/images/4/4b/Magnum_Mega_A1.jpg/revision/latest?cb=20091215204451"
                />
              mode: html
          version: 12.4.0-21428475782
    panel-8:
      kind: Panel
      spec:
        data:
          kind: QueryGroup
          spec:
            queries: []
            queryOptions: {}
            transformations: []
        description: ''
        id: 8
        links: []
        title: Rifle
        vizConfig:
          group: text
          kind: VizConfig
          spec:
            fieldConfig:
              defaults: {}
              overrides: []
            options:
              code:
                language: plaintext
                showLineNumbers: false
                showMiniMap: false
              content: >-
                <img
                src="https://static.wikia.nocookie.net/marathongame/images/f/f1/MA-75B.jpg/revision/latest?cb=20091215205120"
                />
              mode: html
          version: 12.4.0-21428475782
  layout:
    kind: GridLayout
    spec:
      items:
        - kind: GridLayoutItem
          spec:
            element:
              kind: ElementReference
              name: panel-2
            height: 3
            width: 2
            x: 0
            'y': 0
        - kind: GridLayoutItem
          spec:
            element:
              kind: ElementReference
              name: panel-3
            height: 3
            width: 10
            x: 2
            'y': 0
        - kind: GridLayoutItem
          spec:
            element:
              kind: ElementReference
              name: panel-1
            height: 20
            width: 12
            x: 12
            'y': 0
        - kind: GridLayoutItem
          spec:
            element:
              kind: ElementReference
              name: panel-7
            height: 3
            width: 2
            x: 0
            'y': 3
        - kind: GridLayoutItem
          spec:
            element:
              kind: ElementReference
              name: panel-5
            height: 3
            width: 5
            x: 2
            'y': 3
        - kind: GridLayoutItem
          spec:
            element:
              kind: ElementReference
              name: panel-8
            height: 3
            width: 2
            x: 0
            'y': 6
        - kind: GridLayoutItem
          spec:
            element:
              kind: ElementReference
              name: panel-6
            height: 3
            width: 5
            x: 2
            'y': 6
  links:
    - asDropdown: true
      icon: external link
      includeVars: false
      keepTime: false
      tags:
        - marathon-game
      targetBlank: false
      title: Games
      tooltip: ''
      type: dashboards
      url: ''
    - asDropdown: true
      icon: external link
      includeVars: false
      keepTime: false
      tags:
        - marathon-2-level
      targetBlank: false
      title: Levels
      tooltip: ''
      type: dashboards
      url: ''
  liveNow: false
  preload: false
  tags:
    - marathon-2-level
  timeSettings:
    autoRefresh: ''
    autoRefreshIntervals:
      - 5s
      - 10s
      - 30s
      - 1m
      - 5m
      - 15m
      - 30m
      - 1h
      - 2h
      - 1d
    fiscalYearStartMonth: 0
    from: now-5m
    hideTimepicker: false
    timezone: browser
    to: now
  title: "16 - For Carnage, Apply Within"
  variables:
    - kind: ConstantVariable
      spec:
        current:
          text: "Marathon 2"
          value: "Marathon 2"
        hide: hideVariable
        label: Game
        name: game
        query: "Marathon 2"
        skipUrlSync: true
    - kind: ConstantVariable
      spec:
        current:
          text: "For Carnage, Apply Within"
          value: "For Carnage, Apply Within"
        description: ''
        hide: hideVariable
        label: Level
        name: level
        query: "For Carnage, Apply Within"
        skipUrlSync: true
